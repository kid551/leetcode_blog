<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Longest Consecutive Sequence</title>
</head>
<body>
<div class="md-section-divider"></div>

<div class="md-section-divider"></div>

<h1 id="longest-consecutive-sequence" data-anchor-id="31ma">Longest Consecutive Sequence</h1>

<p data-anchor-id="kam0"><code>leetcode</code></p>

<hr>

<p data-anchor-id="h2uf">Problem Statement</p>

<blockquote class="white-blockquote" data-anchor-id="ammd">
  <p>Given an unsorted array of integers, find the length of the longest consecutive elements sequence. </p>
  
  <p>For example, <br>
   Given [100, 4, 200, 1, 3, 2], <br>
   The longest consecutive elements sequence is [1, 2, 3, 4]. Return its length: 4. </p>
  
  <p>Your algorithm should run in O(n) complexity.</p>
</blockquote>

<hr>

<p data-anchor-id="oz9m">There's a easy <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-1-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-1" style="width: 5.39em; display: inline-block;"><span style="width: 4.33em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.87em; position: absolute; clip: rect(1.97em, 1000em, 3.27em, -0.4em);"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mo" id="MathJax-Span-4" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-5" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mi" id="MathJax-Span-6" style="padding-left: 0.16em; font-family: MathJax_Main;">log</span><span class="texatom" id="MathJax-Span-7" style="padding-left: 0.16em;"><span class="mrow" id="MathJax-Span-8"><span class="mi" id="MathJax-Span-9" style="font-family: MathJax_Math; font-style: italic;">n</span></span></span><span class="mo" id="MathJax-Span-10" style="font-family: MathJax_Main;">)</span></span><span style="width: 0px; height: 2.87em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.36em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-1" type="math/tex">O(n\log{n})</script> solution.</p>

<p data-anchor-id="s7b6">We will define a hash table <strong>mp</strong>, and we initialize the hash table with 1:</p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="gdyv"><ol class="linenums"><li class="L0"><code class="language-c++"><span class="pln">unordered_map</span><span class="pun">&lt;</span><span class="kwd">int</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">&gt;</span><span class="pln"> mp</span><span class="pun">;</span></code></li><li class="L1"><code class="language-c++"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> n</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span></code></li><li class="L2"><code class="language-c++"><span class="pln">    mp</span><span class="pun">[</span><span class="pln">A</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li></ol></pre>

<p data-anchor-id="3tzb">The value of mp, mp[A[i]] just means the maximum length of consecutive sequence in which the maximum element is A[i]. </p>

<p data-anchor-id="4ye9">So at beginning, every element itself is a consecutive element, and the maximum length of consecutive sequence ended by A[i] is 1.</p>

<p data-anchor-id="8qja">Then, for each element A[i] in A, we search its one less element A[i]-1. If it exists, we add the mp[A[i]], i.e. </p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="ds41"><ol class="linenums"><li class="L0"><code class="language-c++"><span class="pun">++</span><span class="pln">mp</span><span class="pun">[</span><span class="pln">A</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]]</span></code></li></ol></pre>

<p data-anchor-id="2z7g">Beacause the map is ordered by A[i], these operations can gurantee the increment of mp[A[i]] is beginning at the minimum element. Thus the algorithm is correct.</p>

<hr>

<p data-anchor-id="0vtm"><br>
The <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-2-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-11" style="width: 2.7em; display: inline-block;"><span style="width: 2.16em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.87em; position: absolute; clip: rect(1.97em, 1000em, 3.27em, -0.4em);"><span class="mrow" id="MathJax-Span-12"><span class="mi" id="MathJax-Span-13" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mo" id="MathJax-Span-14" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-15" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-16" style="font-family: MathJax_Main;">)</span></span><span style="width: 0px; height: 2.87em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.36em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-2" type="math/tex">O(n)</script> solving method:</p>

<p data-anchor-id="5qna">Our algorithm is to abstract every connected component(consecutive sequence) out of array A.</p>

<p data-anchor-id="ttno">For every element <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-3-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-17" style="width: 15.51em; display: inline-block;"><span style="width: 12.5em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.87em; position: absolute; clip: rect(1.97em, 1000em, 3.27em, -0.41em);"><span class="mrow" id="MathJax-Span-18"><span class="mi" id="MathJax-Span-19" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-20" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-21" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-22" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-23" style="padding-left: 0.27em; font-family: MathJax_Main;">∈</span><span class="msubsup" id="MathJax-Span-24" style="padding-left: 0.27em;"><span style="width: 1.03em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 2.99em, -0.4em);"><span class="mi" id="MathJax-Span-25" style="font-family: MathJax_Math; font-style: italic;">C<span style="width: 0.04em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span><span style="left: 0.71em; top: -2.47em; position: absolute;"><span class="mi" id="MathJax-Span-26" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">i</span><span style="width: 0px; height: 2.62em; display: inline-block;"></span></span></span></span><span class="mo" id="MathJax-Span-27" style="padding-left: 0.27em; font-family: MathJax_Main;">=</span><span class="mo" id="MathJax-Span-28" style="padding-left: 0.27em; font-family: MathJax_Main;">[</span><span class="msubsup" id="MathJax-Span-29"><span style="width: 2.04em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 2.99em, -0.4em);"><span class="mi" id="MathJax-Span-30" style="font-family: MathJax_Math; font-style: italic;">C<span style="width: 0.04em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span><span style="left: 0.71em; top: -2.47em; position: absolute;"><span class="texatom" id="MathJax-Span-31"><span class="mrow" id="MathJax-Span-32"><span class="mi" id="MathJax-Span-33" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">m</span><span class="mi" id="MathJax-Span-34" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">i</span><span class="mi" id="MathJax-Span-35" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">n</span></span></span><span style="width: 0px; height: 2.62em; display: inline-block;"></span></span></span></span><span class="mo" id="MathJax-Span-36" style="font-family: MathJax_Main;">,</span><span class="msubsup" id="MathJax-Span-37" style="padding-left: 0.16em;"><span style="width: 2.19em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 2.99em, -0.4em);"><span class="mi" id="MathJax-Span-38" style="font-family: MathJax_Math; font-style: italic;">C<span style="width: 0.04em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span><span style="left: 0.71em; top: -2.47em; position: absolute;"><span class="texatom" id="MathJax-Span-39"><span class="mrow" id="MathJax-Span-40"><span class="mi" id="MathJax-Span-41" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">m</span><span class="mi" id="MathJax-Span-42" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">a</span><span class="mi" id="MathJax-Span-43" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">x</span></span></span><span style="width: 0px; height: 2.62em; display: inline-block;"></span></span></span></span><span class="mo" id="MathJax-Span-44" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-45" style="padding-left: 0.27em; font-family: MathJax_Main;">⊆</span><span class="mi" id="MathJax-Span-46" style="padding-left: 0.27em; font-family: MathJax_Math; font-style: italic;">A</span></span><span style="width: 0px; height: 2.87em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.36em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-3" type="math/tex">A[i] \in C_i = [C_{min}, C_{max}] \subseteq A</script>, we search it from <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-4-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-47" style="width: 2.07em; display: inline-block;"><span style="width: 1.66em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.87em; position: absolute; clip: rect(1.97em, 1000em, 3.27em, -0.41em);"><span class="mrow" id="MathJax-Span-48"><span class="mi" id="MathJax-Span-49" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-50" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-51" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-52" style="font-family: MathJax_Main;">]</span></span><span style="width: 0px; height: 2.87em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.36em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-4" type="math/tex">A[i]</script> to its upper bound <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-5-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-53" style="width: 2.76em; display: inline-block;"><span style="width: 2.21em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.31em; position: absolute; clip: rect(1.46em, 1000em, 2.62em, -0.4em);"><span class="mrow" id="MathJax-Span-54"><span class="msubsup" id="MathJax-Span-55"><span style="width: 2.19em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 2.99em, -0.4em);"><span class="mi" id="MathJax-Span-56" style="font-family: MathJax_Math; font-style: italic;">C<span style="width: 0.04em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span><span style="left: 0.71em; top: -2.47em; position: absolute;"><span class="texatom" id="MathJax-Span-57"><span class="mrow" id="MathJax-Span-58"><span class="mi" id="MathJax-Span-59" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">m</span><span class="mi" id="MathJax-Span-60" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">a</span><span class="mi" id="MathJax-Span-61" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">x</span></span></span><span style="width: 0px; height: 2.62em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 2.31em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.19em; overflow: hidden; vertical-align: -0.25em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-5" type="math/tex">C_{max}</script>, and search it to its lower bound <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-6-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-62" style="width: 2.57em; display: inline-block;"><span style="width: 2.06em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.31em; position: absolute; clip: rect(1.46em, 1000em, 2.62em, -0.4em);"><span class="mrow" id="MathJax-Span-63"><span class="msubsup" id="MathJax-Span-64"><span style="width: 2.04em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 2.99em, -0.4em);"><span class="mi" id="MathJax-Span-65" style="font-family: MathJax_Math; font-style: italic;">C<span style="width: 0.04em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span><span style="left: 0.71em; top: -2.47em; position: absolute;"><span class="texatom" id="MathJax-Span-66"><span class="mrow" id="MathJax-Span-67"><span class="mi" id="MathJax-Span-68" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">m</span><span class="mi" id="MathJax-Span-69" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">i</span><span class="mi" id="MathJax-Span-70" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">n</span></span></span><span style="width: 0px; height: 2.62em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 2.31em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.19em; overflow: hidden; vertical-align: -0.25em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-6" type="math/tex">C_{min}</script>.</p>

<p data-anchor-id="x1cg">We first use a hash table to store every element in A as key. And we use <em>true</em> as this key's entry.</p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="0qph"><ol class="linenums"><li class="L0"><code class="language-c++"><span class="pln">unordered_map</span><span class="pun">&lt;</span><span class="kwd">int</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">bool</span><span class="pun">&gt;</span><span class="pln"> mp</span><span class="pun">;</span></code></li><li class="L1"><code class="language-c++"><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> length</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span></code></li><li class="L2"><code class="language-c++"><span class="pln">    mp</span><span class="pun">[</span><span class="pln">num</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li></ol></pre>

<p data-anchor-id="anjh">Then, every time we access one element A[i], we erase it from mp, because it's one element of connected component <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-7-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-71" style="width: 1.26em; display: inline-block;"><span style="width: 1em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.31em; position: absolute; clip: rect(1.46em, 1000em, 2.62em, -0.4em);"><span class="mrow" id="MathJax-Span-72"><span class="msubsup" id="MathJax-Span-73"><span style="width: 1.03em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 2.99em, -0.4em);"><span class="mi" id="MathJax-Span-74" style="font-family: MathJax_Math; font-style: italic;">C<span style="width: 0.04em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span><span style="left: 0.71em; top: -2.47em; position: absolute;"><span class="mi" id="MathJax-Span-75" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">i</span><span style="width: 0px; height: 2.62em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 2.31em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.19em; overflow: hidden; vertical-align: -0.25em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-7" type="math/tex">C_i</script>. Then we find if A[i+1] is exsiting in mp. If it is, we erase it from mp, and add the length of <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-8-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-76" style="width: 1.26em; display: inline-block;"><span style="width: 1em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.31em; position: absolute; clip: rect(1.46em, 1000em, 2.62em, -0.4em);"><span class="mrow" id="MathJax-Span-77"><span class="msubsup" id="MathJax-Span-78"><span style="width: 1.03em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 2.99em, -0.4em);"><span class="mi" id="MathJax-Span-79" style="font-family: MathJax_Math; font-style: italic;">C<span style="width: 0.04em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span><span style="left: 0.71em; top: -2.47em; position: absolute;"><span class="mi" id="MathJax-Span-80" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">i</span><span style="width: 0px; height: 2.62em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 2.31em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.19em; overflow: hidden; vertical-align: -0.25em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-8" type="math/tex">C_i</script>, ++<span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-9-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-81" style="width: 3.01em; display: inline-block;"><span style="width: 2.41em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 3.13em, -0.41em);"><span class="mrow" id="MathJax-Span-82"><span class="mi" id="MathJax-Span-83" style="font-family: MathJax_Math; font-style: italic;">l</span><span class="mi" id="MathJax-Span-84" style="font-family: MathJax_Math; font-style: italic;">e</span><span class="mi" id="MathJax-Span-85" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="msubsup" id="MathJax-Span-86"><span style="width: 1.03em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 2.99em, -0.4em);"><span class="mi" id="MathJax-Span-87" style="font-family: MathJax_Math; font-style: italic;">C<span style="width: 0.04em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span><span style="left: 0.71em; top: -2.47em; position: absolute;"><span class="mi" id="MathJax-Span-88" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">i</span><span style="width: 0px; height: 2.62em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.19em; overflow: hidden; vertical-align: -0.25em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-9" type="math/tex">lenC_i</script>. And keep going until we can't find the next bigger element in mp.</p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="xro2"><ol class="linenums"><li class="L0"><code class="language-c++"><span class="kwd">int</span><span class="pln"> consecutiveLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">  </span><span class="com">//A[i] itself is a consecutive sequence</span></code></li><li class="L1"><code class="language-c++"><span class="kwd">int</span><span class="pln"> findNum </span><span class="pun">=</span><span class="pln"> A</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></code></li><li class="L2"><code class="language-c++"><span class="pln">mp</span><span class="pun">.</span><span class="pln">erase</span><span class="pun">(</span><span class="pln">findNum</span><span class="pun">);</span></code></li><li class="L3"><code class="language-c++"></code></li><li class="L4"><code class="language-c++"><span class="kwd">while</span><span class="pun">(</span><span class="pln">mp</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">mp</span><span class="pun">[</span><span class="pln">findNum</span><span class="pun">+</span><span class="lit">1</span><span class="pun">])</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> mp</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">()){</span></code></li><li class="L5"><code class="language-c++"><span class="pln">    </span><span class="pun">++</span><span class="pln">consecutiveLength</span><span class="pun">;</span></code></li><li class="L6"><code class="language-c++"><span class="pln">    </span><span class="pun">++</span><span class="pln">findNum</span><span class="pun">;</span><span class="pln">  </span><span class="com">//make findNum pointer to next bigger element</span></code></li><li class="L7"><code class="language-c++"><span class="pln">    mp</span><span class="pun">.</span><span class="pln">erase</span><span class="pun">(</span><span class="pln">findNum</span><span class="pun">);</span></code></li><li class="L8"><code class="language-c++"><span class="pun">}</span></code></li></ol></pre>

<p data-anchor-id="uzry">Then, we search to the lower bound of <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-10-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-89" style="width: 1.26em; display: inline-block;"><span style="width: 1em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.31em; position: absolute; clip: rect(1.46em, 1000em, 2.62em, -0.4em);"><span class="mrow" id="MathJax-Span-90"><span class="msubsup" id="MathJax-Span-91"><span style="width: 1.03em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -2.82em; position: absolute; clip: rect(1.96em, 1000em, 2.99em, -0.4em);"><span class="mi" id="MathJax-Span-92" style="font-family: MathJax_Math; font-style: italic;">C<span style="width: 0.04em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 2.82em; display: inline-block;"></span></span><span style="left: 0.71em; top: -2.47em; position: absolute;"><span class="mi" id="MathJax-Span-93" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">i</span><span style="width: 0px; height: 2.62em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 2.31em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.19em; overflow: hidden; vertical-align: -0.25em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-10" type="math/tex">C_i</script> from <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-11-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-94" style="width: 2.07em; display: inline-block;"><span style="width: 1.66em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.87em; position: absolute; clip: rect(1.97em, 1000em, 3.27em, -0.41em);"><span class="mrow" id="MathJax-Span-95"><span class="mi" id="MathJax-Span-96" style="font-family: MathJax_Math; font-style: italic;">A</span><span class="mo" id="MathJax-Span-97" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-98" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-99" style="font-family: MathJax_Main;">]</span></span><span style="width: 0px; height: 2.87em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.36em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-11" type="math/tex">A[i]</script> with the same method.</p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="9gbf"><ol class="linenums"><li class="L0"><code class="language-c++"><span class="pln">findNum </span><span class="pun">=</span><span class="pln"> A</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></code></li><li class="L1"><code class="language-c++"><span class="kwd">while</span><span class="pun">(</span><span class="pln">mp</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">findNum</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> mp</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">()){</span></code></li><li class="L2"><code class="language-c++"><span class="pln">    </span><span class="pun">++</span><span class="pln">consecutiveLength</span><span class="pun">;</span></code></li><li class="L3"><code class="language-c++"><span class="pln">    </span><span class="pun">--</span><span class="pln">findNum</span><span class="pun">;</span><span class="pln">  </span><span class="com">//make findNum pointer to next smaller element</span></code></li><li class="L4"><code class="language-c++"><span class="pln">    mp</span><span class="pun">.</span><span class="pln">erase</span><span class="pun">(</span><span class="pln">findNum</span><span class="pun">);</span></code></li><li class="L5"><code class="language-c++"><span class="pun">}</span></code></li></ol></pre>

<p data-anchor-id="28np">If the current consecutive length is bigger than sum before, we update the sum.</p>

<p data-anchor-id="tzrc">So, based on the above statement, we can iterate through the array to abstract every connected component out of array A. With the constraint of running time <span class="MathJax_Preview"></span><span class="MathJax" id="MathJax-Element-12-Frame" role="textbox" aria-readonly="true"><nobr><span class="math" id="MathJax-Span-100" style="width: 2.7em; display: inline-block;"><span style="width: 2.16em; height: 0px; font-size: 124%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.87em; position: absolute; clip: rect(1.97em, 1000em, 3.27em, -0.4em);"><span class="mrow" id="MathJax-Span-101"><span class="mi" id="MathJax-Span-102" style="font-family: MathJax_Math; font-style: italic;">O</span><span class="mo" id="MathJax-Span-103" style="font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-104" style="font-family: MathJax_Math; font-style: italic;">n</span><span class="mo" id="MathJax-Span-105" style="font-family: MathJax_Main;">)</span></span><span style="width: 0px; height: 2.87em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.36em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0em; border-left-style: solid; display: inline-block;"></span></span></nobr></span><script id="MathJax-Element-12" type="math/tex">O(n)</script>, each time we access the element A[i], we only do the search we A[i] is still in mp.</p>

<p data-anchor-id="jqed">The complete code is below:</p>

<div class="md-section-divider"></div>

<pre class="prettyprint linenums prettyprinted" data-anchor-id="49wf"><ol class="linenums"><li class="L0"><code class="language-c++"><span class="kwd">int</span><span class="pln"> longestConsecutive</span><span class="pun">(</span><span class="pln">vector</span><span class="str">&lt;int&gt;</span><span class="pln"> </span><span class="pun">&amp;</span><span class="pln">num</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L1"><code class="language-c++"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> length </span><span class="pun">=</span><span class="pln"> num</span><span class="pun">.</span><span class="pln">size</span><span class="pun">();</span></code></li><li class="L2"><code class="language-c++"><span class="pln">        </span><span class="kwd">if</span><span class="pun">(</span><span class="lit">0</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> length</span><span class="pun">)</span><span class="pln"> </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L3"><code class="language-c++"></code></li><li class="L4"><code class="language-c++"><span class="pln">        unordered_map</span><span class="pun">&lt;</span><span class="kwd">int</span><span class="pun">,</span><span class="pln"> </span><span class="kwd">bool</span><span class="pun">&gt;</span><span class="pln"> mp</span><span class="pun">;</span></code></li><li class="L5"><code class="language-c++"><span class="pln">        </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> length</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">){</span></code></li><li class="L6"><code class="language-c++"><span class="pln">            mp</span><span class="pun">[</span><span class="pln">num</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></code></li><li class="L7"><code class="language-c++"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L8"><code class="language-c++"></code></li><li class="L9"><code class="language-c++"><span class="pln">        </span><span class="kwd">int</span><span class="pln"> res </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span></code></li><li class="L0"><code class="language-c++"><span class="pln">        </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> length</span><span class="pun">;</span><span class="pln"> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">){</span></code></li><li class="L1"><code class="language-c++"><span class="pln">            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">mp</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">num</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> mp</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">())</span><span class="pln"> </span><span class="kwd">continue</span><span class="pun">;</span></code></li><li class="L2"><code class="language-c++"></code></li><li class="L3"><code class="language-c++"><span class="pln">            </span><span class="kwd">int</span><span class="pln"> consecutiveLength </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span></code></li><li class="L4"><code class="language-c++"><span class="pln">            </span><span class="kwd">int</span><span class="pln"> findNum </span><span class="pun">=</span><span class="pln"> num</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></code></li><li class="L5"><code class="language-c++"></code></li><li class="L6"><code class="language-c++"><span class="pln">            mp</span><span class="pun">.</span><span class="pln">erase</span><span class="pun">(</span><span class="pln">findNum</span><span class="pun">);</span></code></li><li class="L7"><code class="language-c++"></code></li><li class="L8"><code class="language-c++"><span class="pln">            </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">mp</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">findNum</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> mp</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">()){</span></code></li><li class="L9"><code class="language-c++"><span class="pln">                </span><span class="pun">++</span><span class="pln">consecutiveLength</span><span class="pun">;</span></code></li><li class="L0"><code class="language-c++"><span class="pln">                </span><span class="pun">++</span><span class="pln">findNum</span><span class="pun">;</span></code></li><li class="L1"><code class="language-c++"><span class="pln">                mp</span><span class="pun">.</span><span class="pln">erase</span><span class="pun">(</span><span class="pln">findNum</span><span class="pun">);</span></code></li><li class="L2"><code class="language-c++"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L3"><code class="language-c++"></code></li><li class="L4"><code class="language-c++"><span class="pln">            findNum </span><span class="pun">=</span><span class="pln"> num</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span></code></li><li class="L5"><code class="language-c++"><span class="pln">            </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">mp</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">findNum</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> mp</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">()){</span></code></li><li class="L6"><code class="language-c++"><span class="pln">                </span><span class="pun">++</span><span class="pln">consecutiveLength</span><span class="pun">;</span></code></li><li class="L7"><code class="language-c++"><span class="pln">                </span><span class="pun">--</span><span class="pln">findNum</span><span class="pun">;</span></code></li><li class="L8"><code class="language-c++"><span class="pln">                mp</span><span class="pun">.</span><span class="pln">erase</span><span class="pun">(</span><span class="pln">findNum</span><span class="pun">);</span></code></li><li class="L9"><code class="language-c++"><span class="pln">            </span><span class="pun">}</span></code></li><li class="L0"><code class="language-c++"></code></li><li class="L1"><code class="language-c++"><span class="pln">            res </span><span class="pun">=</span><span class="pln"> consecutiveLength </span><span class="pun">&gt;</span><span class="pln"> res </span><span class="pun">?</span><span class="pln"> consecutiveLength </span><span class="pun">:</span><span class="pln"> res </span><span class="pun">;</span></code></li><li class="L2"><code class="language-c++"><span class="pln">        </span><span class="pun">}</span></code></li><li class="L3"><code class="language-c++"></code></li><li class="L4"><code class="language-c++"><span class="pln">        </span><span class="kwd">return</span><span class="pln"> res</span><span class="pun">;</span></code></li><li class="L5"><code class="language-c++"></code></li><li class="L6"><code class="language-c++"><span class="pln">    </span><span class="pun">}</span></code></li></ol></pre>

<hr>

<p data-anchor-id="l7u8"><em>Reference</em> <br>
1. yucoding.blogspot.com</p>
</body>
</html>